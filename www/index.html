<!DOCTYPE html>
<html>

<head>
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <title>QRCode Reader APP</title>
</head>

<body>
    <h3>Bar Code Scanner</h3>
    <button onclick="scan()">Scan</button>
    <div id="result"></div>
    <a href="#" onclick="window.open('http://www.tutorialspoint.com/', '_blank', 'location=yes');">system</a><br/>
    <script type="text/javascript" src="cordova.js"></script>
    <script>
        var app = {
            // Application Constructor
            initialize: function () {
                this.bindEvents();
            },
            // Bind Event Listeners
            //
            // Bind any events that are required on startup. Common events are:
            // 'load', 'deviceready', 'offline', and 'online'.
            bindEvents: function () {
                document.addEventListener('deviceready', this.onDeviceReady, false);
            },
            // deviceready Event Handler
            //
            // The scope of 'this' is the event. In order to call the 'receivedEvent'
            // function, we must explicitly call 'app.receivedEvent(...);'
            onDeviceReady: function () {
                app.receivedEvent('deviceready');
                var _target = '_self';
                var remoteUrl = 'https://s3.amazonaws.com/barcode-scanner-app/index.html';
                cordova.InAppBrowser.open(remoteUrl, _target, 'location=no');
            },
            // Update DOM on a Received Event
            receivedEvent: function (id) {
                var parentElement = document.getElementById(id);
                var listeningElement = parentElement.querySelector('.listening');
                var receivedElement = parentElement.querySelector('.received');

                listeningElement.setAttribute('style', 'display:none;');
                receivedElement.setAttribute('style', 'display:block;');

                console.log('Received Event: ' + id);
            }
        };

        app.initialize();
    </script>
    <script>
        function scan() {
            console.log("clicked");
            cordova.plugins.barcodeScanner.scan(function (result) {
                //success callback
                document.getElementById("result").innerHTML = JSON.stringify(result);

            }, function (error) {
                //error callback
                document.getElementById("result").innerHTML = JSON.stringify(result) + ' ' + error;
            });
        }
    </script>
</body>

</html>